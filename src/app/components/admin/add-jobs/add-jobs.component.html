<section class="ezy__signup1_PQS26JGS d-flex align-items-center">
  <div class="container">
    <div class="row py-4 justify-content-center">
      <div class="col-lg-12">
        <div class="card ezy__signup1_PQS26JGS-form-card">
          <div class="card-body p-md-5">
            <h2 class="ezy__signup1_PQS26JGS-heading mb-4 mb-md-5">Add Job Post</h2>

            <form [formGroup]="jobForm" (ngSubmit)="onSubmit()">
              <div class="row">
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label for="designation" class="mb-2">Designation</label>
                    <input
                      type="text"
                      class="form-control"
                      id="designation"
                      formControlName="designation"
                      placeholder="Designation"
                      [ngClass]="{'is-invalid': jobForm.get('designation')?.invalid && jobForm.get('designation')?.touched}"
                    />
                    <div *ngIf="jobForm.get('designation')?.invalid && jobForm.get('designation')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('designation')?.errors?.['required']">Designation is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label for="company" class="mb-2">Company</label>
                    <input
                      type="text"
                      class="form-control"
                      id="company"
                      formControlName="company"
                      placeholder="Company"
                      [ngClass]="{'is-invalid': jobForm.get('company')?.invalid && jobForm.get('company')?.touched}"
                    />
                    <div *ngIf="jobForm.get('company')?.invalid && jobForm.get('company')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('company')?.errors?.['required']">Company is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="companyWebsite" class="mb-2">Company Website</label>
                    <input
                      type="url"
                      class="form-control"
                      id="companyWebsite"
                      formControlName="company_website"
                      placeholder="Company Website"
                      [ngClass]="{'is-invalid': jobForm.get('company_website')?.invalid && jobForm.get('company_website')?.touched}"
                    />
                    <div *ngIf="jobForm.get('company_website')?.invalid && jobForm.get('company_website')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('company_website')?.errors?.['required']">Company Website is required.</div>
                      <div *ngIf="jobForm.get('company_website')?.errors?.['pattern']">Please enter a valid URL.</div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="companyDescription" class="mb-2">Company Description</label>
                    <textarea
                      class="form-control"
                      id="companyDescription"
                      formControlName="company_description"
                      placeholder="Company Description"
                      [ngClass]="{'is-invalid': jobForm.get('company_description')?.invalid && jobForm.get('company_description')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('company_description')?.invalid && jobForm.get('company_description')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('company_description')?.errors?.['required']">Company Description is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="location" class="mb-2">Location</label>
                    <textarea
                      class="form-control"
                      id="location"
                      formControlName="location"
                      placeholder="Location"
                      [ngClass]="{'is-invalid': jobForm.get('location')?.invalid && jobForm.get('location')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('location')?.invalid && jobForm.get('location')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('location')?.errors?.['required']">Location is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="salary" class="mb-2">Salary</label>
                    <textarea
                      class="form-control"
                      id="salary"
                      formControlName="salary"
                      placeholder="Salary"
                      [ngClass]="{'is-invalid': jobForm.get('salary')?.invalid && jobForm.get('salary')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('salary')?.invalid && jobForm.get('salary')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('salary')?.errors?.['required']">Salary is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="jobType" class="mb-2">Job Type</label>
                    <textarea
                      class="form-control"
                      id="jobType"
                      formControlName="job_type"
                      placeholder="Job Type"
                      [ngClass]="{'is-invalid': jobForm.get('job_type')?.invalid && jobForm.get('job_type')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('job_type')?.invalid && jobForm.get('job_type')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('job_type')?.errors?.['required']">Job Type is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="experience" class="mb-2">Experience</label>
                    <textarea
                      class="form-control"
                      id="experience"
                      formControlName="experience"
                      placeholder="Experience"
                      [ngClass]="{'is-invalid': jobForm.get('experience')?.invalid && jobForm.get('experience')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('experience')?.invalid && jobForm.get('experience')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('experience')?.errors?.['required']">Experience is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="jobDescription" class="mb-2">Job Description</label>
                    <textarea
                      class="form-control"
                      id="jobDescription"
                      formControlName="job_description_text"
                      placeholder="Job Description"
                      [ngClass]="{'is-invalid': jobForm.get('job_description_text')?.invalid && jobForm.get('job_description_text')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('job_description_text')?.invalid && jobForm.get('job_description_text')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('job_description_text')?.errors?.['required']">Job Description is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="dateOfPosting" class="mb-2">Date of Posting</label>
                    <input
                      type="date"
                      class="form-control"
                      id="dateOfPosting"
                      formControlName="date_of_posting"
                      placeholder="Date of Posting"
                      [ngClass]="{'is-invalid': jobForm.get('date_of_posting')?.invalid && jobForm.get('date_of_posting')?.touched}"
                    />
                    <div *ngIf="jobForm.get('date_of_posting')?.invalid && jobForm.get('date_of_posting')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('date_of_posting')?.errors?.['required']">Date of Posting is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="lastDateToApply" class="mb-2">Last date to apply</label>
                    <input
                      type="date"
                      class="form-control"
                      id="lastDateToApply"
                      formControlName="last_date_to_apply"
                      placeholder="Last date to apply"
                      [ngClass]="{'is-invalid': jobForm.get('last_date_to_apply')?.invalid && jobForm.get('last_date_to_apply')?.touched}"
                    />
                    <div *ngIf="jobForm.get('last_date_to_apply')?.invalid && jobForm.get('last_date_to_apply')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('last_date_to_apply')?.errors?.['required']">Last date to apply is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="workMode" class="mb-2">Work Mode</label>
                    <textarea
                      class="form-control"
                      id="workMode"
                      formControlName="work_mode"
                      placeholder="Work Mode"
                      [ngClass]="{'is-invalid': jobForm.get('work_mode')?.invalid && jobForm.get('work_mode')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('work_mode')?.invalid && jobForm.get('work_mode')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('work_mode')?.errors?.['required']">Work Mode is required.</div>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <div class="form-group mb-4">
                    <label for="active" class="mb-2">Active</label>
                    <select
                      class="form-control"
                      id="active"
                      formControlName="active"
                      [ngClass]="{'is-invalid': jobForm.get('active')?.invalid && jobForm.get('active')?.touched}"
                    >
                      <option [value]="true">Active</option>
                      <option [value]="false">Inactive</option>
                    </select>
                    <div *ngIf="jobForm.get('active')?.invalid && jobForm.get('active')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('active')?.errors?.['required']">Please select the active status.</div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="skills" class="mb-2">Skills</label>
                    <div formArrayName="skills">
                      <div *ngFor="let skill of skills.controls; let i = index" class="d-flex align-items-center">
                        <input
                          type="text"
                          class="form-control mb-2 mr-2"
                          [formControlName]="i"
                          placeholder="Skill"
                          [ngClass]="{'is-invalid': skill.invalid && skill.touched}"
                        />
                        <div *ngIf="skill.invalid && skill.touched" class="invalid-feedback">
                          <div *ngIf="skill.errors?.['required']">Skill is required.</div>
                        </div>
                        <button *ngIf="i>0" (click)="removeSkill(i)" type="button" class="btn btn-danger btn-sm">
                          <i class="fa fa-trash-o"></i>
                        </button>
                      </div>
                      <button (click)="addSkill()" type="button" class="btn btn-secondary">Add Skill</button>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="qualification" class="mb-2">Qualification</label>
                    <div formArrayName="qualification">
                      <div *ngFor="let qual of qualification.controls; let i = index" class="d-flex align-items-center">
                        <input
                          type="text"
                          class="form-control mb-2 mr-2"
                          [formControlName]="i"
                          placeholder="Qualification"
                          [ngClass]="{'is-invalid': qual.invalid && qual.touched}"
                        />
                        <div *ngIf="qual.invalid && qual.touched" class="invalid-feedback">
                          <div *ngIf="qual.errors?.['required']">Qualification is required.</div>
                        </div>
                        <button *ngIf="i>0" (click)="removeQualification(i)" type="button" class="btn btn-danger btn-sm">
                          <i class="fa fa-trash-o"></i>
                        </button>
                      </div>
                      <button (click)="addQualification()" type="button" class="btn btn-secondary">Add Qualification</button>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="responsibilities" class="mb-2">Responsibilities</label>
                    <div formArrayName="responsibilities">
                      <div *ngFor="let responsibility of responsibilities.controls; let i = index" class="d-flex align-items-center">
                        <input
                          type="text"
                          class="form-control mb-2 mr-2"
                          [formControlName]="i"
                          placeholder="Responsibility"
                          [ngClass]="{'is-invalid': responsibility.invalid && responsibility.touched}"
                        />
                        <div *ngIf="responsibility.invalid && responsibility.touched" class="invalid-feedback">
                          <div *ngIf="responsibility.errors?.['required']">Responsibility is required.</div>
                        </div>
                        <button *ngIf="i>0" (click)="removeResponsibility(i)" type="button" class="btn btn-danger btn-sm">
                          <i class="fa fa-trash-o"></i>
                        </button>
                      </div>
                      <button (click)="addResponsibility()" type="button" class="btn btn-secondary">Add Responsibility</button>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="contactInfo" class="mb-2">Contact Info</label>
                    <div formGroupName="contact_info">
                      <label for="email" class="mb-2">Email</label>
                      <input
                        type="text"
                        class="form-control mb-2"
                        formControlName="email"
                        placeholder="Email"
                        [ngClass]="{'is-invalid': jobForm.get('contact_info.email')?.invalid && jobForm.get('contact_info.email')?.touched}"
                      />
                      <div *ngIf="jobForm.get('contact_info.email')?.invalid && jobForm.get('contact_info.email')?.touched" class="invalid-feedback">
                        <div *ngIf="jobForm.get('contact_info.email')?.errors?.['required']">Email is required.</div>
                      </div>

                      <label for="phone" class="mb-2">Contact Number</label>
                      <input
                        type="text"
                        class="form-control mb-2"
                        formControlName="phone"
                        placeholder="Phone"
                        [ngClass]="{'is-invalid': jobForm.get('contact_info.phone')?.invalid && jobForm.get('contact_info.phone')?.touched}"
                      />
                      <div *ngIf="jobForm.get('contact_info.phone')?.invalid && jobForm.get('contact_info.phone')?.touched" class="invalid-feedback">
                        <div *ngIf="jobForm.get('contact_info.phone')?.errors?.['required']">Contact Number is required.</div>
                      </div>

                      <label for="linkedin" class="mb-2">LinkedIn</label>
                      <input
                        type="text"
                        class="form-control mb-2"
                        formControlName="linkedin"
                        placeholder="LinkedIn"
                        [ngClass]="{'is-invalid': jobForm.get('contact_info.linkedin')?.invalid && jobForm.get('contact_info.linkedin')?.touched}"
                      />
                      <div *ngIf="jobForm.get('contact_info.linkedin')?.invalid && jobForm.get('contact_info.linkedin')?.touched" class="invalid-feedback">
                        <div *ngIf="jobForm.get('contact_info.linkedin')?.errors?.['required']">LinkedIn is required.</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="keywords" class="mb-2">Keywords</label>
                    <div formArrayName="keywords">
                      <div *ngFor="let keyword of keywords.controls; let i = index" class="d-flex align-items-center">
                        <input
                          type="text"
                          class="form-control mb-2 mr-2"
                          [formControlName]="i"
                          placeholder="Keyword"
                          [ngClass]="{'is-invalid': keyword.invalid && keyword.touched}"
                        />
                        <div *ngIf="keyword.invalid && keyword.touched" class="invalid-feedback">
                          <div *ngIf="keyword.errors?.['required']">Keyword is required.</div>
                        </div>
                        <button *ngIf="i>0" (click)="removeKeyword(i)" type="button" class="btn btn-danger btn-sm">
                          <i class="fa fa-trash-o"></i>
                        </button>
                      </div>
                      <button (click)="addKeyword()" type="button" class="btn btn-secondary">Add Keyword</button>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="whyWorkHere" class="mb-2">Why Work Here</label>
                    <div formArrayName="why_work_here">
                      <div *ngFor="let reason of whyWorkHere.controls; let i = index" class="d-flex align-items-center">
                        <input
                          type="text"
                          class="form-control mb-2 mr-2"
                          [formControlName]="i"
                          placeholder="Reason"
                          [ngClass]="{'is-invalid': reason.invalid && reason.touched}"
                        />
                        <div *ngIf="reason.invalid && reason.touched" class="invalid-feedback">
                          <div *ngIf="reason.errors?.['required']">Reason is required.</div>
                        </div>
                        <button *ngIf="i>0" (click)="removeWhyWorkHere(i)" type="button" class="btn btn-danger btn-sm">
                          <i class="fa fa-trash-o"></i>
                        </button>
                      </div>
                      <button (click)="addWhyWorkHere()" type="button" class="btn btn-secondary">Add Reason</button>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group mb-4">
                    <label for="extra" class="mb-2">Extra</label>
                    <textarea
                      class="form-control"
                      id="extra"
                      formControlName="extra"
                      placeholder="Extra"
                      [ngClass]="{'is-invalid': jobForm.get('extra')?.invalid && jobForm.get('extra')?.touched}"
                    ></textarea>
                    <div *ngIf="jobForm.get('extra')?.invalid && jobForm.get('extra')?.touched" class="invalid-feedback">
                      <div *ngIf="jobForm.get('extra')?.errors?.['required']">Extra information is required.</div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-lg-12">
                    <div style="text-align: right; display: flex; justify-content: flex-end; gap: 10px;">
                      <button type="button" class="btn btn-warning" (click)="resetForm()">Reset</button>
                      <button *ngIf="!updateMode" type="submit" class="btn ezy__signup1_PQS26JGS-btn-submit">Add Job Post</button>
                      <button *ngIf="updateMode" (click)="update()" type="submit" class="btn btn-submit">Update Job Post</button>
                    </div>
                  </div>
                </div>


                <div class="col-12" *ngIf="jobForm.invalid && jobForm.touched">
                  <div class="alert alert-danger mt-3" role="alert">
                    Please correct the errors in the form before submitting.
                  </div>
                </div>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>
